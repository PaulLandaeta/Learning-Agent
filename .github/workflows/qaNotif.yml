name: Push-develop-QA-Notification

on:
  Push:
    branches:
      - develop

jobs:
  notify:
    runs-on: ubuntu-latest

    steps:
      - name: Discord Webhook Action for Deployment Status
        if: startsWith(github.event.deployment.environment, 'Preview')
        uses: tsickert/discord-webhook@v5.3.0
        with:
          webhook-url: ${{ secrets.DISCORD_QA_WEBHOOK }}
          embed-title: "ğŸš€ Estado de Despliegue ğŸš€"
          embed-color: "5801101" 
          embed-description: |
            ğŸ“¡ Despliegue: ${{ github.event.deployment.sha }}

            ğŸ“ Estado: ${{ github.event.deployment_status.state }}

            ğŸ‘· Entorno: ${{ github.event.deployment.environment }}

            ğŸ”— URL del Despliegue: ${{ secrets.QA_DEPLOY_URL }}

            ğŸ“‹ Commit: ${{ github.event.deployment.sha }}

            ğŸ•“ Creado en: ${{ github.event.deployment.created_at }}

            â­ Despliegue exitoso en QA â­

          embed-author-name: "${{ github.event.deployment_status.creator.login }}"
            
          embed-author-icon-url: "${{ github.event.deployment_status.creator.avatar_url }}"